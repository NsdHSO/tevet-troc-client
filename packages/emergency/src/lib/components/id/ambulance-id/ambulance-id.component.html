@let statuses = service.ambulanceApiService.ambulanceStatus;
@if (service.ambulanceApiService.changeAmbulanceStatus | async) {
}


<div class="p-4 sm:p-6 lg:p-8">
  @if (ambulance) {
    <div class="mb-6 grid grid-cols-10 items-center gap-4">
      <lib-text styleText="Title_3_1" class="col-span-5">Ambulance Overview</lib-text>
      <lib-badge [title]="ambulance.status" class="col-span-5 justify-self-end flex w-max" />
    </div>
    <ul class="grid grid-cols-1 gap-6 md:grid-cols-2">
      @for (cards of ambulance.uiElements; track $index) {
        <!-- General Information -->
        <lib-jumbotron [hover]="true" [attr.aria-label]="cards[0].title">
          <ul>
            @for (element of cards; track $index) {
              <lib-info-line
                [description]="element.description"
                [title]="element.title"
                [ariaName]="element.title + ' ' + element.description"
                [type]="element.description ? 'Title_1' : 'Title_2'"
              />
            }
          </ul>
        </lib-jumbotron>
      }
    </ul>

    @if (statuses.isLoading()) {
      <lib-text>Loading</lib-text>
    } @else {
      <lib-selector [options]="statuses.value()?.message" [selectedTemplateRef]="selectedTemplate"
                    (optionSelected)="service.changeStatus($event, ambulance.id, ambulance.hospital_id, ambulance.ambulance_ic)"
      >
        <ng-template #optionTemplate let-status>
          <lib-text>
            {{ status.label }}
          </lib-text>
        </ng-template>
      </lib-selector>
    }

    <ng-template #selectedTemplate let-status>
      <lib-text [content]="status" styleText="Small_1">
        Change status
      </lib-text>
    </ng-template>
  }
</div>
