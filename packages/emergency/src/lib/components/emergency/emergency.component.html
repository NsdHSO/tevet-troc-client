<main
  style="height: 100vh"
>
  @for (layout of layouts(); track layout.title; let idx = $index) {
    <section
      [attr.aria-description]="layout.ariaDescription"
    >
      <header class="{{layout.class}} flex gap-4 items-center">
        <span class="text-purple-600 dark:text-purple-400"><mat-icon [svgIcon]="layout.icon" /></span>
        <lib-text styleText="Title_1">{{ layout.title }}</lib-text>
      </header>
      <div class="{{layout.sectionClass}}">
        @let dataDataSource = emergencyService.dataSourceForTable[idx];
        @let dataAsync = dataDataSource.value | async;
        @if (dataAsync?.data) {
          <elix-table
            [dataSource]="dataAsync.data"
            [zebraColor]="true"
            (onPaginationChange)="
          emergencyService.changePageSize($event,
          emergencyService.dataSourceForTable[idx].pageIndex,
          emergencyService.dataSourceForTable[idx].pageSize)"
            [pageIndex]="emergencyService.dataSourceForTable[idx].pageIndex()"
            [pageSize]="emergencyService.dataSourceForTable[idx].pageSize()"
            [showPagination]="true"
            [lengthPagination]="dataAsync.length"

          >
            @for (row of emergencyService.dataSourceForTable[idx].rows; track row) {
              @if (!$last) {
                <elix-column-text
                  [className]="row.className"
                  [field]="row.field"
                  [name]="row.name" />
              } @else {
                <elix-column-icon-action
                  [className]="row.className"
                  [field]="row.field"
                  [name]="row.name" />
              }
            }
          </elix-table>
        }
      </div>
    </section>
  }
</main>
