"use strict";(self.webpackChunktevet_troc_client=self.webpackChunktevet_troc_client||[]).push([[75],{3075:(Ie,N,l)=>{l.r(N),l.d(N,{C:()=>X,D:()=>Ee});var s=l(4238),d=l(1578),p=l(5409);const T=new s.nKC("API_CONFIG_AMBULANCE",{factory:()=>({baseUrl:process.env.TEVET_API+"/v1/ambulance"})}),P=new s.nKC("API_CONFIG_EMERGENCY",{factory:()=>({baseUrl:process.env.TEVET_API+"/v1/emergency"})});var b=l(7634),m=l(3259),E=l(686),I=l(8548),w=l(7300),u=l(158),_=l(3290),R=l(7885),f=l(1972);let F=(()=>{class n{authToken=(0,s.WQX)(R.xL);_httpClient=(0,s.WQX)(b.Qq);_apiConfigAmbulance=(0,s.WQX)(T);_apiConfigEmergency=(0,s.WQX)(P);_router=(0,s.WQX)(E.Ix);hospitalId=(0,s.vPA)("Hospital of the University of Pennsylvania");page=(0,s.vPA)(0);pageSize=(0,s.vPA)(10);pageEmergency=(0,s.vPA)(0);pageSizeEmergency=(0,s.vPA)(10);emergencyId=new I.t("");httpAmbulanceResponse$=(0,w.z)([(0,f.br)(this.hospitalId),(0,f.br)(this.page),(0,f.br)(this.pageSize)]).pipe((0,u.n)(()=>{const t=`${this._apiConfigAmbulance.baseUrl}`,a=(new b.Nl).set("filterBy",`hospitalId=${this.hospitalId()}`).set("page",this.page()).set("per_page",this.pageSize());return this._httpClient.get(t,{params:a})}),(0,_.T)(t=>({data:t.message.data.map(a=>({actions:[{iconClass:"fa_solid:pen-to-square",classCss:"edit",method:i=>{this._router.navigate([{outlets:{drawer:["details_panel"]}}],{queryParams:{ambulance_ic:i.model.ambulance_ic}})}}],editable:!1,model:{...a,type:m.n[a.type],fuel_type:m.H6[a.fuel_type],driver_name:a.driver_name??"Not set"}})),length:t.message.pagination.total_items})));httpEmergencyResponse$=(0,w.z)([(0,f.br)(this.pageEmergency),(0,f.br)(this.pageSizeEmergency)]).pipe((0,u.n)(()=>{const t=`${this._apiConfigEmergency.baseUrl}`,a=(new b.Nl).set("page",this.pageEmergency()).set("per_page",this.pageSizeEmergency());return this._httpClient.get(t,{params:a})}),(0,_.T)(t=>({data:t.message.data.map(a=>({actions:[{iconClass:"fa_solid:pen-to-square",classCss:"edit",method:i=>{this._router.navigate([{outlets:{drawer:["details_panel"]}}],{queryParams:{emergency_ic:i.model.emergency_ic}})}}],editable:!1,model:{...a}})),length:t.message.pagination.total_items})));set emergencyIdValue(t){this.emergencyId.next(t)}httpEmergencyIdResponse$=this.emergencyId.pipe((0,u.n)(t=>this._httpClient.get(`${this._apiConfigEmergency.baseUrl}`,{params:{per_page:"1",page:"0",filter:`ic=${t}`}})),(0,_.T)(t=>t.message.data[0]),(0,_.T)(t=>t?{status:(0,m.EY)()[t.status],uiElements:[[{title:"Incident Overview",edit:!1},{title:"Incident ID",description:t.id,edit:!1},{title:"Status",description:(0,m.EY)()[t.status],edit:!1},{title:"Severity",description:t.severity,edit:!1},{title:"Incident Type",description:t.incident_type,edit:!1},{title:"Description",description:t.description,edit:!1},{title:"Emergency IC",description:t.emergency_ic.toString(),edit:!1}],[{title:"Timeline & Reporting",edit:!1},{title:"Created At",description:new Date(t.created_at).toLocaleString(),edit:!1},{title:"Updated At",description:new Date(t.updated_at).toLocaleString(),edit:!1},{title:"Resolved At",description:t.resolved_at?new Date(t.resolved_at).toLocaleString():"N/A",edit:!1},{title:"Reported By",description:t.reported_by,edit:!1},{title:"Modification Attempts",description:null!==t.modification_attempts?t.modification_attempts.toString():"N/A",edit:!1}],[{title:"Assigned Resources",edit:!1},{title:"Hospital ID",description:t.hospital_id||"N/A",edit:!1},{title:"Ambulance ID",description:t.ambulance_id||"N/A",edit:!1}],[{title:"Location & Notes",edit:!1},{title:"Emergency Location",description:`${t.emergency_latitude}, ${t.emergency_longitude}`,edit:!1},{title:"Notes",description:t.notes||"N/A",edit:!1}]],id:t.id,emergency_ic:t.emergency_ic,hospital_id:t.hospital_id||""}:{uiElements:[]}));static \u0275fac=function(a){return new(a||n)};static \u0275prov=s.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var M=l(2746);let h=(()=>{class n{permissionDirective=(0,s.WQX)(M.D);get permissionCode(){return m.Rd.EMERGENCY_CREATE}_ambulanceApi=(0,s.WQX)(F);pageSize=this._ambulanceApi.pageSize;emergencyIdResponse=this._ambulanceApi.httpEmergencyIdResponse$;set emergencyIc(t){this._ambulanceApi.emergencyIdValue=t}changePageSize(t,a,i){i.set(t.pageSize),a.set(t.pageIndex)}page=this._ambulanceApi.page;ambulanceRows=[{className:"ambulance-id",field:"ambulance_ic",name:"Ambulance ID"},{className:"fuell-type",field:"fuel_type",name:"Fuell Type"},{className:"ambulance-type",field:"type",name:"Type of Ambulance"},{className:"action2",field:"ambulanceIc",name:"Edit Ambulance IC "}];emergencyRows=[{className:"emergency-ic",field:"emergency_ic",name:"Edit Emergency IC"},{className:"action2",field:"reported_by",name:"Action"}];dataSourceForTable=[{value:this._ambulanceApi.httpAmbulanceResponse$,pageIndex:this.page,pageSize:this.pageSize,rows:this.ambulanceRows},{value:this._ambulanceApi.httpEmergencyResponse$,pageIndex:this._ambulanceApi.pageEmergency,pageSize:this._ambulanceApi.pageSizeEmergency,rows:this.emergencyRows}];static \u0275fac=function(a){return new(a||n)};static \u0275prov=s.jDH({token:n,factory:n.\u0275fac})}return n})();var k=l(3623),C=l(6239),g=l(8328),e=l(6375);const $=(n,o)=>o.title;function x(n,o){if(1&n&&e.nrm(0,"elix-column-text",6),2&n){const t=e.XpG().$implicit;e.Y8G("className",t.className)("field",t.field)("name",t.name)}}function j(n,o){if(1&n&&e.nrm(0,"elix-column-icon-action",6),2&n){const t=e.XpG(2).$implicit;e.Y8G("className",t.className)("field",t.field)("name",t.name)}}function G(n,o){if(1&n&&e.nVh(0,j,1,3,"elix-column-icon-action",6),2&n){const t=e.XpG(4);e.vxM(t.emergencyService.permissionDirective.hasPermission(t.emergencyService.permissionCode)?0:-1)}}function B(n,o){1&n&&e.nVh(0,x,1,3,"elix-column-text",6)(1,G,1,1),2&n&&e.vxM(o.$index!==o.$count-1?0:1)}function V(n,o){if(1&n){const t=e.RV6();e.j41(0,"elix-table",5),e.bIt("onPaginationChange",function(i){s.eBV(t);const r=e.XpG().$index,v=e.XpG();return s.Njj(v.emergencyService.changePageSize(i,v.emergencyService.dataSourceForTable[r].pageIndex,v.emergencyService.dataSourceForTable[r].pageSize))}),e.Z7z(1,B,2,1,null,null,e.fX1),e.k0s()}if(2&n){const t=e.XpG().$index,a=e.r8f(7),i=e.XpG();e.Y8G("dataSource",a.data)("zebraColor",!0)("pageIndex",i.emergencyService.dataSourceForTable[t].pageIndex())("pageSize",i.emergencyService.dataSourceForTable[t].pageSize())("showPagination",!0)("lengthPagination",a.length),e.R7$(),e.Dyx(i.emergencyService.dataSourceForTable[t].rows)}}function L(n,o){if(1&n&&(e.j41(0,"section")(1,"header")(2,"span",1),e.nrm(3,"mat-icon",2),e.k0s(),e.j41(4,"lib-text",3),e.EFF(5),e.k0s()(),e.j41(6,"div"),e.SS7(7),e.nI1(8,"async"),e.nVh(9,V,3,6,"elix-table",4),e.k0s()()),2&n){const t=o.$implicit,a=o.$index;e.BMQ("aria-description",t.ariaDescription),e.R7$(),e.HbH(e.VkB("",t.class," flex gap-4 items-center")),e.R7$(2),e.Y8G("svgIcon",t.icon),e.R7$(2),e.JRh(t.title),e.R7$(),e.HbH(t.sectionClass);const i=e.XpG().emergencyService.dataSourceForTable[a];e.R7$();const r=e.bH3(e.bMT(8,9,i.value));e.R7$(2),e.vxM(null!=r&&r.data?9:-1)}}let X=(()=>{class n{emergencyService=(0,s.WQX)(h);layouts=(0,d.hFB)();static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-emergency"]],inputs:{layouts:[1,"layouts"]},features:[e.Jv_([h,M.D])],decls:3,vars:0,consts:[[2,"height","100vh"],[1,"text-purple-600","dark:text-purple-400"],[3,"svgIcon"],["styleText","Title_1"],[3,"dataSource","zebraColor","pageIndex","pageSize","showPagination","lengthPagination"],[3,"onPaginationChange","dataSource","zebraColor","pageIndex","pageSize","showPagination","lengthPagination"],[3,"className","field","name"]],template:function(a,i){1&a&&(e.j41(0,"main",0),e.Z7z(1,L,10,12,"section",null,$),e.k0s()),2&a&&(e.R7$(),e.Dyx(i.layouts()))},dependencies:[p.N,p.l,k.An,C.Or,C.Rt,C.T_,g.Jj],styles:["[_nghost-%COMP%]   main[_ngcontent-%COMP%]{display:grid;width:100%;gap:.75rem}@media (min-width: 400px){[_nghost-%COMP%]   main[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}}@media (min-width: 640px){[_nghost-%COMP%]   main[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   .emergency-ambulance[_ngcontent-%COMP%]{view-transition-name:router-navigation}"]})}return n})();var z=l(1082),Y=l(1393),y=l(1781);let Q=(()=>{class n{_apiConfigAmbulance=(0,s.WQX)(T);_httpClient=(0,s.WQX)(b.Qq);ambulanceIc=new I.t("");status$=new z.B;httpClient=(0,s.WQX)(b.Qq);set ic(t){this.ambulanceIc.next(t)}ambulanceResource=this.ambulanceIc.pipe((0,u.n)(t=>this.httpClient.get(`${this._apiConfigAmbulance.baseUrl}`,{params:{per_page:1,page:0,filter:`ic=${t}`}})),(0,_.T)(t=>t.message.data[0]),(0,_.T)(t=>t?{status:(0,m.ZC)()[t.status],uiElements:[[{title:"General Information",edit:!1},{title:"Vehicle Number",description:t.vehicle_number,edit:!1},{title:"Type",description:m.n[t.type],edit:!1},{title:"Make",description:t.make,edit:!1},{title:"Model",description:t.car_details_model,edit:!1},{title:"Capacity",description:`${t.capacity} passengers`,edit:!1},{title:"Fuel Type",description:t.fuel_type||"N/A",edit:!1},{title:"Ambulance IC",description:t.ambulance_ic.toString(),edit:!1},{title:"Hospital ID",description:t.hospital_id,edit:!1},{title:"Created At",description:new Date(t.created_at).toLocaleString(),edit:!1},{title:"Updated At",description:new Date(t.updated_at).toLocaleString(),edit:!1}],[{title:"Driver & Service",edit:!1},{title:"Driver Name",description:t.driver_name||"N/A",edit:!1},{title:"Driver License",description:t.driver_license||"N/A",edit:!1},{title:"Mileage",description:`${t.mileage} km`,edit:!1},{title:"Last Service",description:t.last_service_date||"N/A",edit:!1},{title:"Next Service",description:t.next_service_date||"N/A",edit:!1},{title:"Registration Number",description:t.registration_number||"N/A",edit:!1},{title:"Insurance Provider",description:t.insurance_provider||"N/A",edit:!1},{title:"Insurance Expiry",description:t.insurance_expiry_date||"N/A",edit:!1}],[{title:"Car Specifics",edit:!1},{title:"Car Year",description:t.car_details_year.toString(),edit:!1},{title:"Color",description:t.car_details_color,edit:!1},{title:"Is Ambulance",description:t.car_details_is_ambulance?"Yes":"No",edit:!1},{title:"License Plate",description:t.car_details_license_plate||"N/A",edit:!1},{title:"Car Mileage",description:`${t.car_details_mileage} km`,edit:!1}],[{title:"Mission & Notes",edit:!1},{title:"Mission",description:t.mission,edit:!1},{title:"Notes",description:t.notes,edit:!1},{title:"Passengers",description:t.passengers.length>0?t.passengers.join(", "):"None",edit:!1},{title:"Location (Lat/Lon)",description:`${t.location_latitude},${t.location_longitude}`,edit:!1}]],id:t.id,ambulance_ic:t.ambulance_ic,hospital_id:t.hospital_id}:{uiElements:[],status:null}));getAmbulanceStatus=this._httpClient.get(this._apiConfigAmbulance.baseUrl+"/status");changeAmbulanceStatus=this.status$.pipe((0,u.n)(t=>this.httpClient.patch(this._apiConfigAmbulance.baseUrl+`/${t.id}`,{status:t.status.value,hospital_name:t.hospital_id}).pipe((0,u.n)(()=>(0,Y.of)(t.ambulance_ic)))),(0,y.M)(t=>{this.ambulanceIc.next(t)}));static \u0275fac=function(a){return new(a||n)};static \u0275prov=s.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A=(()=>{class n{ambulanceApiService=(0,s.WQX)(Q);changeStatus(t,a,i,r){this.ambulanceApiService.status$.next({status:t,id:a,hospital_id:i,ambulance_ic:r})}static \u0275fac=function(a){return new(a||n)};static \u0275prov=s.jDH({token:n,factory:n.\u0275fac})}return n})();var U=l(4655),H=l(3484),S=l(2611),c=l(2127);const W=["optionTemplate"],Z=["dropdownList"],J=n=>({$implicit:n}),K=(n,o)=>({$implicit:n,index:o});function q(n,o){if(1&n&&(e.j41(0,"lib-text",7),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.picked||t.label," ")}}function ee(n,o){1&n&&e.EFF(0," Dropdown opened. ")}function te(n,o){1&n&&e.EFF(0," Dropdown closed. ")}function ne(n,o){if(1&n&&(e.j41(0,"lib-text"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t||t," ")}}function ie(n,o){if(1&n){const t=e.RV6();e.j41(0,"li",9)(1,"button",3),e.bIt("click",function(){const i=s.eBV(t).$implicit,r=e.XpG(2);return s.Njj(r.selectOption(i))}),e.DNE(2,ne,2,1,"ng-template",null,2,e.C5r),e.eu8(4,4),e.k0s()()}if(2&n){const t=o.$implicit,a=o.$index,i=e.sdS(3),r=e.XpG(2);e.AVh("bg-gray-100",t===r.picked)("dark:bg-gray-700",t===r.picked),e.BMQ("aria-selected",t===r.picked),e.R7$(4),e.Y8G("ngTemplateOutlet",r.optionTemplateRef()||i)("ngTemplateOutletContext",e.l_i(7,K,t,a))}}function ae(n,o){if(1&n&&(e.j41(0,"ul",6,1)(2,"lib-jumbotron"),e.Z7z(3,ie,5,10,"li",8,e.Vm6),e.k0s()()),2&n){const t=e.XpG();e.Y8G("@slideInOut",void 0),e.BMQ("focusable",!0),e.R7$(3),e.Dyx(t.options())}}let oe=(()=>{class n{ngAfterViewChecked(){this.isOpen&&this.dropdownList()&&setTimeout(()=>{this.dropdownList()?.nativeElement.focus()},0)}picked;label=(0,d.hFB)();options=(0,d.hFB)();selectedTemplateRef=(0,d.hFB)();optionTemplateRef=(0,d.sbv)("optionTemplate");dropdownList=(0,d.ebz)("dropdownList");optionSelected=(0,d.CGW)();isOpen=!1;toggleDropdown(){this.isOpen=!this.isOpen}selectOption(t){this.picked=t,this.optionSelected.emit(t),this.isOpen=!1}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-selector"]],contentQueries:function(a,i,r){1&a&&e.C6U(r,i.optionTemplateRef,W,5),2&a&&e.NyB()},viewQuery:function(a,i){1&a&&e.wEZ(i.dropdownList,Z,5),2&a&&e.NyB()},inputs:{label:[1,"label"],options:[1,"options"],selectedTemplateRef:[1,"selectedTemplateRef"]},outputs:{optionSelected:"optionSelected"},decls:8,vars:6,consts:[["defaultSelected",""],["dropdownList",""],["defaultOption",""],[3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-live","polite","aria-atomic","true",1,"sr-only"],["role","listbox","aria-expanded","true","aria-haspopup","listbox","aria-label","Select an option","tabindex","-1",1,"flex","w-max"],["styleText","Small_1"],["role","option",1,"hover:bg-gray-100","hover:dark:bg-gray-600","hover:cursor-pointer","rounded-lg",3,"bg-gray-100","dark:bg-gray-700"],["role","option",1,"hover:bg-gray-100","hover:dark:bg-gray-600","hover:cursor-pointer","rounded-lg"]],template:function(a,i){if(1&a){const r=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){return s.eBV(r),s.Njj(i.toggleDropdown())}),e.DNE(1,q,2,1,"ng-template",null,0,e.C5r),e.eu8(3,4),e.k0s(),e.j41(4,"div",5),e.nVh(5,ee,1,0)(6,te,1,0),e.k0s(),e.nVh(7,ae,5,2,"ul",6)}if(2&a){const r=e.sdS(2);e.R7$(3),e.Y8G("ngTemplateOutlet",i.selectedTemplateRef()||r)("ngTemplateOutletContext",e.eq3(4,J,i.picked)),e.R7$(2),e.vxM(i.isOpen?5:6),e.R7$(2),e.vxM(i.isOpen?7:-1)}},dependencies:[g.MD,g.T3,p.N,p.l,S._],encapsulation:2,data:{animation:[(0,c.hZ)("slideInOut",[(0,c.wk)("void",(0,c.iF)({maxHeight:"0",opacity:"0",transform:"translateY(-10px)"})),(0,c.kY)("void => *",[(0,c.iF)({maxHeight:"0",opacity:"0",transform:"translateY(-10px)"}),(0,c.Os)([(0,c.i0)("200ms ease-out",(0,c.iF)({maxHeight:"300px",opacity:"1",transform:"translateY(0)"})),(0,c.P)("li",[(0,c.iF)({opacity:0,transform:"translateY(20px)"}),(0,c.yc)(10,[(0,c.i0)("200ms ease-out",(0,c.iF)({opacity:1,transform:"translateY(0)"}))])],{optional:!0})])]),(0,c.kY)("* => void",[(0,c.Os)([(0,c.i0)("200ms ease-in",(0,c.iF)({maxHeight:"0",opacity:"0",transform:"translateY(-10px)"})),(0,c.P)("li",[(0,c.yc)(-50,[(0,c.i0)("200ms ease-in",(0,c.iF)({opacity:0,transform:"translateY(20px)"}))])],{optional:!0})])])])]}})}return n})();var se=l(6722);function le(n,o){1&n&&e.EFF(0," :\n")}function re(n,o){if(1&n&&(e.j41(0,"lib-text",1),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.BMQ("aria-hidden",!0),e.R7$(),e.SpI(" ",t.description()," ")}}let D=(()=>{class n{type=(0,d.hFB)(m.kj.Title_1);title=(0,d.hFB)(null);description=(0,d.hFB)("",{transform:t=>void 0===t||""===t?null:t});static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-info-line"]],hostVars:1,hostBindings:function(a,i){2&a&&e.BMQ("data-test","info-line")},inputs:{type:[1,"type"],title:[1,"title"],description:[1,"description"]},features:[e.nM4([se.C])],decls:4,vars:5,consts:[[3,"styleText"],["styleText","Small_1"]],template:function(a,i){1&a&&(e.j41(0,"lib-text",0),e.EFF(1),e.nVh(2,le,1,0),e.k0s(),e.nVh(3,re,2,2,"lib-text",1)),2&a&&(e.Y8G("styleText",i.type()),e.BMQ("aria-hidden",!0),e.R7$(),e.SpI(" ",i.title()," "),e.R7$(),e.vxM(i.description()?2:-1),e.R7$(),e.vxM(i.description()?3:-1))},dependencies:[g.MD,p.N,p.l],styles:["@media not all and (min-width: 280px){[_nghost-%COMP%]{flex-direction:column;gap:0px;padding-bottom:.5rem}}@media (min-width: 1024px){[_nghost-%COMP%]{display:flex;justify-content:space-between;gap:1rem}}@media not all and (min-width: 280px){[_nghost-%COMP%]:last-child{padding-bottom:0}}"],changeDetection:0})}return n})();const ce=n=>({label:n});let O=(()=>{class n{title=(0,d.hFB)(null,{transform:t=>null===t?"":t});get ambulanceStatus(){return m.Qy}ambulanceStsDisplayNames=m.ZC;emergencyStatusDisplayNames=m.EY;EmergencyStatusEnum=m.l4;static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-badge"]],hostVars:36,hostBindings:function(a,i){2&a&&e.AVh("available",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.AVAILABLE]||i.title()===i.emergencyStatusDisplayNames()[i.EmergencyStatusEnum.InProgress])("in_service",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.IN_SERVICE])("maintenance",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.MAINTENANCE]||i.title()===i.emergencyStatusDisplayNames()[i.EmergencyStatusEnum.Reported])("dispatched",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.DISPATCHED]||i.title()===i.emergencyStatusDisplayNames()[i.EmergencyStatusEnum.Assigned])("en_route_to_scene",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.EN_ROUTE_TO_SCENE])("at_scene",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.AT_SCENE])("transporting_patient",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.TRANSPORTING_PATIENT]||i.title()===i.emergencyStatusDisplayNames()[i.EmergencyStatusEnum.Resolved])("en_route_to_hospital",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.EN_ROUTE_TO_HOSPITAL])("at_hospital",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.AT_HOSPITAL])("returning_to_base",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.RETURNING_TO_BASE])("unavailable",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.UNAVAILABLE]||i.title()===i.emergencyStatusDisplayNames()[i.EmergencyStatusEnum.Canceled])("out_of_service",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.OUT_OF_SERVICE])("on_break",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.ON_BREAK])("fueling",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.FUELING])("cleaning",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.CLEANING])("awaiting_dispatch",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.AWAITING_DISPATCH])("preparing_for_mission",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.PREPARING_FOR_MISSION])("under_repair",i.title()===i.ambulanceStsDisplayNames()[i.ambulanceStatus.UNDER_REPAIR])},inputs:{title:[1,"title"]},decls:1,vars:3,consts:[["styleText","Small_1",3,"content"]],template:function(a,i){1&a&&e.nrm(0,"lib-text",0),2&a&&e.Y8G("content",e.eq3(1,ce,i.title()))},dependencies:[p.N,p.l],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:9999px;padding:.25rem .75rem;font-weight:600}.available[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.available[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}}.in_service[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.in_service[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(30 64 175 / var(--tw-bg-opacity, 1))}}.maintenance[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.maintenance[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}}.dispatched[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(199 210 254 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.dispatched[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}}.en_route_to_scene[_nghost-%COMP%], .transporting_patient[_nghost-%COMP%], .en_route_to_hospital[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 215 170 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.en_route_to_scene[_nghost-%COMP%], .transporting_patient[_nghost-%COMP%], .en_route_to_hospital[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity, 1))}}.at_scene[_nghost-%COMP%], .at_hospital[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(153 246 228 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.at_scene[_nghost-%COMP%], .at_hospital[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(15 118 110 / var(--tw-bg-opacity, 1))}}.returning_to_base[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(217 249 157 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.returning_to_base[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(77 124 15 / var(--tw-bg-opacity, 1))}}.unavailable[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.unavailable[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}}.out_of_service[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 202 202 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.out_of_service[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}}.on_break[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.on_break[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(133 77 14 / var(--tw-bg-opacity, 1))}}.fueling[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(253 230 138 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.fueling[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(180 83 9 / var(--tw-bg-opacity, 1))}}.cleaning[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(167 243 208 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.cleaning[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(4 120 87 / var(--tw-bg-opacity, 1))}}.awaiting_dispatch[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.awaiting_dispatch[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(161 98 7 / var(--tw-bg-opacity, 1))}}.preparing_for_mission[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(165 243 252 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.preparing_for_mission[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity, 1))}}.under_repair[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(251 207 232 / var(--tw-bg-opacity, 1))}@media (prefers-color-scheme: dark){.under_repair[_nghost-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(190 24 93 / var(--tw-bg-opacity, 1))}}"],changeDetection:0})}return n})();function pe(n,o){}function me(n,o){if(1&n&&e.nrm(0,"lib-info-line",9),2&n){const t=o.$implicit;e.Y8G("description",t.description)("title",t.title),e.jOp("ariaName",t.title+" "+t.description),e.Y8G("type",t.description?"Title_1":"Title_2")}}function de(n,o){if(1&n&&(e.j41(0,"lib-jumbotron",7)(1,"ul"),e.Z7z(2,me,1,4,"lib-info-line",9,e.Vm6),e.k0s()()),2&n){const t=o.$implicit;e.Y8G("hover",!0),e.BMQ("aria-label",t[0].title),e.R7$(2),e.Dyx(t)}}function ge(n,o){1&n&&(e.j41(0,"lib-text"),e.EFF(1,"Loading"),e.k0s())}function ue(n,o){if(1&n&&(e.j41(0,"lib-text"),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(),e.SpI(" ",t.label," ")}}function _e(n,o){if(1&n){const t=e.RV6();e.j41(0,"lib-selector",10),e.bIt("optionSelected",function(i){s.eBV(t);const r=e.XpG(2);return s.Njj(r.service.changeStatus(i,r.ambulance.id,r.ambulance.hospital_id,r.ambulance.ambulance_ic))}),e.DNE(1,ue,2,1,"ng-template",null,1,e.C5r),e.k0s()}if(2&n){e.XpG();const t=e.sdS(10);e.XpG();const a=e.r8f(0);e.Y8G("options",null==a?null:a.message)("selectedTemplateRef",t)}}function be(n,o){1&n&&(e.j41(0,"lib-text",11),e.EFF(1," Change status "),e.k0s()),2&n&&e.Y8G("content",o.$implicit)}function fe(n,o){if(1&n&&(e.j41(0,"div",3)(1,"lib-text",4),e.EFF(2,"Ambulance Overview"),e.k0s(),e.nrm(3,"lib-badge",5),e.k0s(),e.j41(4,"ul",6),e.Z7z(5,de,4,2,"lib-jumbotron",7,e.Vm6),e.k0s(),e.nVh(7,ge,2,0,"lib-text")(8,_e,3,2,"lib-selector",8),e.DNE(9,be,2,1,"ng-template",null,0,e.C5r)),2&n){const t=e.XpG(),a=e.r8f(0);e.R7$(3),e.Y8G("title",t.ambulance.status),e.R7$(2),e.Dyx(t.ambulance.uiElements),e.R7$(2),e.vxM(a?8:7)}}let ye=(()=>{class n{ambulance;service;static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-ambulance"]],inputs:{ambulance:"ambulance",service:"service"},decls:6,vars:7,consts:[["selectedTemplate",""],["optionTemplate",""],[1,"p-4","sm:p-6","lg:p-8"],[1,"mb-6","grid","grid-cols-10","items-center","gap-4"],["styleText","Title_3_1",1,"col-span-5"],[1,"col-span-5","justify-self-end","flex","w-max",3,"title"],[1,"grid","grid-cols-1","gap-6","md:grid-cols-2"],[3,"hover"],[3,"options","selectedTemplateRef"],[3,"description","title","ariaName","type"],[3,"optionSelected","options","selectedTemplateRef"],["styleText","Small_1",3,"content"]],template:function(a,i){1&a&&(e.SS7(0),e.nI1(1,"async"),e.nVh(2,pe,0,0),e.nI1(3,"async"),e.j41(4,"div",2),e.nVh(5,fe,11,2),e.k0s()),2&a&&(e.bH3(e.bMT(1,2,i.service.ambulanceApiService.getAmbulanceStatus)),e.R7$(2),e.vxM(e.bMT(3,5,i.service.ambulanceApiService.changeAmbulanceStatus)?2:-1),e.R7$(3),e.vxM(i.ambulance?5:-1))},dependencies:[g.MD,p.N,p.l,oe,D,S._,O,g.Jj],encapsulation:2,changeDetection:0})}return n})();function he(n,o){if(1&n&&e.nrm(0,"lib-info-line",6),2&n){const t=o.$implicit;e.Y8G("description",t.description)("title",t.title),e.jOp("ariaName",t.title+" "+t.description),e.Y8G("type",t.description?"Title_1":"Title_2")}}function ve(n,o){if(1&n&&(e.j41(0,"lib-jumbotron",5)(1,"ul"),e.Z7z(2,he,1,4,"lib-info-line",6,e.Vm6),e.k0s()()),2&n){const t=o.$implicit;e.Y8G("hover",!0),e.BMQ("aria-label",t[0].title),e.R7$(2),e.Dyx(t)}}function Ce(n,o){if(1&n&&(e.j41(0,"div",1)(1,"lib-text",2),e.EFF(2,"Emergency Incident Overview"),e.k0s(),e.nrm(3,"lib-badge",3),e.k0s(),e.j41(4,"ul",4),e.Z7z(5,ve,4,2,"lib-jumbotron",5,e.Vm6),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("title",t.emergencyData.status),e.R7$(2),e.Dyx(t.emergencyData.uiElements)}}function Se(n,o){1&n&&(e.j41(0,"lib-text"),e.EFF(1,"No emergency data available."),e.k0s())}let Ne=(()=>{class n{emergencyData;static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-emergency-id"]],inputs:{emergencyData:"emergencyData"},decls:3,vars:1,consts:[[1,"p-4","sm:p-6","lg:p-8"],[1,"mb-6","grid","grid-cols-8","items-center","gap-4"],["styleText","Title_3_1",1,"col-span-6"],[1,"col-span-2","justify-self-end",3,"title"],[1,"grid","grid-cols-1","gap-6","md:grid-cols-2"],[3,"hover"],[3,"description","title","ariaName","type"]],template:function(a,i){1&a&&(e.j41(0,"div",0),e.nVh(1,Ce,7,1)(2,Se,2,0,"lib-text"),e.k0s()),2&a&&(e.R7$(),e.vxM(i.emergencyData?1:2))},dependencies:[g.MD,p.l,p.N,O,S._,D],encapsulation:2})}return n})();function Te(n,o){}let Ee=(()=>{class n{viewContainer=(0,s.WQX)(e.c1b);route=(0,s.WQX)(E.nX);ambulanceService=(0,s.WQX)(A);emergencyService=(0,s.WQX)(h);element=this.route.queryParams.pipe((0,u.n)(t=>(this.viewContainer.clear(),void 0!==t.ambulance_ic?(this.ambulanceService.ambulanceApiService.ic=t.ambulance_ic,this.ambulanceService.ambulanceApiService.ambulanceResource.pipe((0,y.M)(()=>{this.viewContainer.clear()}),(0,y.M)(a=>{if(a){const i=this.viewContainer.createComponent(ye);i.instance.ambulance=a,i.instance.service=this.ambulanceService,i.changeDetectorRef.detectChanges()}}))):void 0!==t.emergency_ic?(this.emergencyService.emergencyIc=t.emergency_ic,this.emergencyService.emergencyIdResponse.pipe((0,y.M)(()=>{this.viewContainer.clear()}),(0,y.M)(a=>{if(a){const i=this.viewContainer.createComponent(Ne);i.instance.emergencyData=a,i.changeDetectorRef.detectChanges()}}))):U.w)),(0,H.j)(()=>{this.viewContainer.clear()}));static \u0275fac=function(a){return new(a||n)};static \u0275cmp=e.VBU({type:n,selectors:[["lib-emergency"]],features:[e.Jv_([A,h])],decls:2,vars:3,template:function(a,i){1&a&&(e.nVh(0,Te,0,0),e.nI1(1,"async")),2&a&&e.vxM(e.bMT(1,1,i.element)?0:-1)},dependencies:[g.MD,g.Jj],styles:["[_nghost-%COMP%]{height:100vh}"]})}return n})()}}]);